<!DOCTYPE html><html class=no-js><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>使用Jekyll与GitHub Pages构建网站 &mdash; Huntout Zhang</title><meta name=viewport content="width=device-width, initial-scale=1"><meta property=og:title content="使用Jekyll与GitHub Pages构建网站"><meta name=description content="本博开篇，按例介绍一下使用 Jekyll 与 GitHub Pages 构建网站的流程，一为后来者造福，二为自己留个记录。"><meta name=og:description content="本博开篇，按例介绍一下使用 Jekyll 与 GitHub Pages 构建网站的流程，一为后来者造福，二为自己留个记录。"><meta name=twitter:card content=summary><meta name=twitter:site content=@huntout><meta property=og:image content=/2014/01/26/jekyll-github/octojekyll-topleft.png><meta property=og:url content="http://huntout.me/2014/01/26/jekyll-github/"><meta property=og:site_name content=huntout.me><meta property=og:type content=article><meta property=og:locale content=zh_CN><meta property=article:published_time content=2014-01-26><!-- Place favicon.ico and apple-touch-icon(s) in the root directory --><!-- google fonts --><link rel=stylesheet href="http://fonts.googleapis.com/css?family=Poly:400,400italic"><link rel=stylesheet href=/css/main.64f8.css><script src=/js/head-scripts.8e9a.js></script><script src=/js/sidebar.a2a6.js></script></head><body><!--[if lt IE 8]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--><iframe id=sidebar class=sidebar></iframe><header><h1 class=logo onclick="document.location.href='/'"><a href="/"><img src=/img/signature.07f1.png width=160 height=50 alt=Signature></a></h1><ul class=navigation><li><a href="/archive/" title="Archived articles">Archive</a></li><li><a href="/about/">About me</a></li></ul></header><div class="content photo-post"><div class="post single"><h1>使用Jekyll与GitHub Pages构建网站</h1><info datetime=" 2014-01-26 ">Jan 26, 2014</info><div class=body><p><img src=/2014/01/26/jekyll-github/octojekyll.png alt=""></p><p>本博开篇，按例介绍一下使用 <a href="http://jekyllrb.com/">Jekyll</a> 与 <a href="http://pages.github.com/">GitHub Pages</a> 构建网站的流程，一为后来者造福，二为自己留个记录。</p><h2>准备</h2><p>我搭建的过程大部分也是乘着前人栽树的阴凉，下面是我建议的<strong>阅读清单</strong>：</p><ul><li><p><a href=http://www.ruanyifeng.com/blog/2012/08/blogging_with_jekyll.html>搭建一个免费的，无限流量的Blog----github Pages和Jekyll入门 (阮一峰)</a></p><p>看完你应该有整体概念了，但这是 2012年写的，现在GitHub 除了支持 Project site (<code>gh_pages</code> branch)，还支持 User or organization site (<code>username.github.io</code> repository)。</p></li><li><p><a href=http://www.madhur.co.in/blog/2011/09/01/runningjekyllwindows.html>Running Jekyll on Windows (Madhur Ahuja)</a></p><p>在 Windows 上安装运行 Jekyll。</p></li><li><p><a href=https://help.github.com/articles/using-jekyll-with-pages>Using Jekyll with Pages (GitHub help)</a></p><p>本篇重点在搭建与 GitHub Pages 相同的 Jekyll 环境，保证本地调试与最终发布的页面一致。</p><p>特别说明一下，我的Gemfile如下</p><div class=highlight><pre><code class="ruby language-ruby" data-lang=ruby><span class=n>source</span> <span class=s1>&#39;http://ruby.taobao.org&#39;</span>
<span class=n>gem</span> <span class=s1>&#39;github-pages&#39;</span>
<span class=n>gem</span> <span class=s1>&#39;wdm&#39;</span>
</code></pre></div><ul><li>使用了淘宝搭建的 <a href=http://ruby.taobao.org>RubyGems 镜像</a></li><li><code>wdm</code>: Windows Directory Monitor (WDM) is a library which can be used to monitor directories for changes.</li></ul></li></ul><h2>步骤</h2><ul><li><p>My OS: Windows 7 64 bits</p></li><li><p>Install <a href="http://rubyinstaller.org/downloads/">Ruby 1.9</a></p><p>Add <code>C:\Ruby193\bin</code> to Path</p></li><li><p>Install <a href="http://rubyinstaller.org/downloads/">Ruby Development Kit for Ruby 1.9</a></p><p>Extract it to <code>C:\devkit</code></p><div class=highlight><pre><code class="text language-text" data-lang=text>C:\devkit&gt;ruby dk.rb init
C:\devkit&gt;ruby dk.rb install
C:\devkit&gt;ruby -v
ruby 1.9.3p484 (2013-11-22) [i386-mingw32]
</code></pre></div></li><li><p>Install <a href=http://gnuwin32.sourceforge.net/packages.html>Which and Wget for Windows</a></p><p>Add <code>C:\Program Files (x86)\GnuWin32\bin</code> to Path</p><div class=highlight><pre><code class="text language-text" data-lang=text>C:\&gt;which which
C:\Program Files (x86)\GnuWin32\bin\which.EXE
C:\&gt;which wget
C:\Program Files (x86)\GnuWin32\bin\wget.EXE
</code></pre></div></li><li><p>Install Python</p><div class=highlight><pre><code class="text language-text" data-lang=text>C:\temp&gt;wget -nc python.org/ftp/python/2.7.2/python-2.7.2.msi
C:\temp&gt;msiexec -qn -i python-2.7.2.msi ADDLOCAL=&quot;DefaultFeature&quot;
</code></pre></div><p>Add <code>C:\Python27</code> to Path</p></li><li><p>Install easy_install</p><div class=highlight><pre><code class="text language-text" data-lang=text>C:\temp&gt;wget -nc peak.telecommunity.com/dist/ez_setup.py
C:\temp&gt;python ez_setup.py
</code></pre></div><p>Add <code>C:\Python27\Scripts</code> to Path</p></li><li><p>Install Pygments</p><div class=highlight><pre><code class="text language-text" data-lang=text>C:\&gt;easy_install Pygments
</code></pre></div><div class=highlight><pre><code class="diff language-diff" data-lang=diff><span class=gd>--- C:\Ruby193\lib\ruby\gems\1.9.1\gems\pygments.rb-0.5.4\lib\pygments\popen.rb</span>
<span class=gi>+++ C:\Ruby193\lib\ruby\gems\1.9.1\gems\pygments.rb-0.5.4\lib\pygments\popen.rb (Unsaved)</span>
<span class=gu>@@ -46,8 +46,8 @@</span>
 # something like that.
 def python_binary
   @python_binary ||= begin
<span class=gd>-        `which python2`</span>
<span class=gd>-        $?.success? ? &quot;python2&quot; : &quot;python&quot;</span>
<span class=gi>+        `which python`</span>
<span class=gi>+        $?.success? ? &quot;python&quot; : &quot;python2&quot;</span>
   end
 end
</code></pre></div></li><li><p>Install bundler</p><div class=highlight><pre><code class="text language-text" data-lang=text>C:\&gt;gem install bundler
</code></pre></div></li><li><p>Create your Github Pages repository</p><ul><li>Fork <a href=https://github.com/huntout/huntout.github.io>huntout.github.io</a></li><li>Rename repository to <code>yourname.github.io</code></li><li>Edit <code>CNAME</code> to match your domain</li></ul></li><li><p>Clone <code>yourname.github.io</code> to locale</p><div class=highlight><pre><code class="text language-text" data-lang=text>C:\&gt;git clone git@github.com:yourname/yourname.github.io.git
</code></pre></div><blockquote><p>由于 GitHub Pages 不支持自定义 <a href="http://jekyllrb.com/docs/plugins/">plugins</a>，我采用了 <a href=https://github.com/robwierzbowski/generator-jekyllrb>generator-jekyllrb</a>。源文件在 <code>yo</code> 分支，使用 Grunt 自动编译发布到 <code>master</code> 分支。原来的 <code>master</code> 分支已经备份到 <code>master.bak</code>。(Updated on Feb 05, 2014)</p></blockquote></li><li><p>Bundle</p><div class=highlight><pre><code class="text language-text" data-lang=text>C:\yourname.github.io&gt;bundle install
C:\yourname.github.io&gt;bundle exec jekyll serve --watch
</code></pre></div></li><li><p>if you meet <code>error: Invalid argument - C:/yourname.github.io/_site/C:.</code></p><div class=highlight><pre><code class="diff language-diff" data-lang=diff><span class=gd>--- C:\Ruby193\lib\ruby\gems\1.9.1\gems\jekyll-1.4.3\lib\jekyll\page.rb</span>
<span class=gi>+++ C:\Ruby193\lib\ruby\gems\1.9.1\gems\jekyll-1.4.3\lib\jekyll\page.rb (Unsaved)</span>
<span class=gu>@@ -133,7 +133,7 @@</span>
 #
 # Returns the destination file path String.
 def destination(dest)
<span class=gd>-      path = File.join(dest, File.expand_path(self.url, &quot;/&quot;))</span>
<span class=gi>+      path = File.join(dest, self.url)</span>
   path = File.join(path, &quot;index.html&quot;) if self.url =~ /\/$/
   path
 end
</code></pre></div><div class=highlight><pre><code class="diff language-diff" data-lang=diff><span class=gd>--- C:\Ruby193\lib\ruby\gems\1.9.1\gems\jekyll-1.4.3\lib\jekyll\post.rb</span>
<span class=gi>+++ C:\Ruby193\lib\ruby\gems\1.9.1\gems\jekyll-1.4.3\lib\jekyll\post.rb (Unsaved)</span>
<span class=gu>@@ -266,7 +266,7 @@</span>
 # Returns destination file path String.
 def destination(dest)
   # The url needs to be unescaped in order to preserve the correct filename
<span class=gd>-      path = File.join(dest, File.expand_path(CGI.unescape(self.url), &quot;/&quot;))</span>
<span class=gi>+      path = File.join(dest, CGI.unescape(self.url))</span>
   path = File.join(path, &quot;index.html&quot;) if path[/\.html$/].nil?
   path
 end
</code></pre></div></li></ul><p><strong>Enjoy it!</strong></p></div><div class=breaker></div><!-- Duoshuo Comment BEGIN --><div class=ds-thread data-thread-key=/2014/01/26/jekyll-github data-title="使用Jekyll与GitHub Pages构建网站" data-image=http://huntout.me/2014/01/26/jekyll-github/octojekyll-topleft.png data-url="http://huntout.me/2014/01/26/jekyll-github/"></div><script type=text/javascript>var duoshuoQuery = {
  short_name: "huntout"
};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';
  ds.async = true;
  ds.src = 'http://static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script><!-- Duoshuo Comment END --></div></div><footer><p><a rel=license href=http://creativecommons.org/licenses/by/4.0 class=cc><img src=/img/cc-cc.e30e.png class=cc> <img src=/img/cc-by.abdd.png class=cc></a> This work is licensed under a <a rel=license href=http://creativecommons.org/licenses/by/4.0>Creative Commons License</a></p><p>Hosted by <a href="http://pages.github.com/" target=_blank>GitHub Pages</a> &middot; Forked from <a href=https://github.com/rsms/rsms.github.com target=_blank>rsms/rsms.github.com</a></p></footer><script src=//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js></script><script>window.jQuery || document.write('<script src="/_bower_components/jquery.js"><\/script>')</script><script src=/js/scripts.d16b.js></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47439417-1', 'huntout.me');
  ga('send', 'pageview');</script></body></html>